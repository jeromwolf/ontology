'use client'

import { useState } from 'react'
import { 
  BarChart3, Calculator, Brain, TrendingUp, 
  Zap, AlertCircle, CheckCircle, Lightbulb,
  Code, Play, FlaskConical, Dice1
} from 'lucide-react'

interface ChapterContentProps {
  chapterId: string
}

export default function ChapterContent({ chapterId }: ChapterContentProps) {
  const renderContent = () => {
    switch (chapterId) {
      case 'probability-basics':
        return <ProbabilityBasicsContent />
      case 'distributions':
        return <DistributionsContent />
      case 'descriptive-statistics':
        return <DescriptiveStatisticsContent />
      case 'inferential-statistics':
        return <InferentialStatisticsContent />
      case 'bayesian-statistics':
        return <BayesianStatisticsContent />
      case 'regression-analysis':
        return <RegressionAnalysisContent />
      case 'time-series':
        return <TimeSeriesContent />
      case 'ml-statistics':
        return <MLStatisticsContent />
      default:
        return <div>챕터 콘텐츠를 찾을 수 없습니다.</div>
    }
  }

  return (
    <div className="prose prose-lg dark:prose-invert max-w-none">
      {renderContent()}
    </div>
  )
}

// Chapter 1: 확률의 기초
function ProbabilityBasicsContent() {
  const [diceResult, setDiceResult] = useState<number | null>(null)
  const [coinFlips, setCoinFlips] = useState<string[]>([])

  const rollDice = () => {
    const result = Math.floor(Math.random() * 6) + 1
    setDiceResult(result)
  }

  const flipCoins = (n: number) => {
    const flips = Array(n).fill(0).map(() => Math.random() > 0.5 ? 'H' : 'T')
    setCoinFlips(flips)
  }

  return (
    <div className="space-y-8">
      <section>
        <h2 className="text-3xl font-bold mb-6">확률의 기초 개념</h2>
        
        <div className="bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl mb-6">
          <h3 className="text-xl font-semibold mb-4 flex items-center gap-2">
            <Lightbulb className="w-5 h-5 text-blue-600 dark:text-blue-400" />
            확률이란?
          </h3>
          <p className="text-gray-700 dark:text-gray-300">
            확률(Probability)은 어떤 사건이 일어날 가능성을 0과 1 사이의 수로 나타낸 것입니다.
            0은 절대 일어나지 않음을, 1은 반드시 일어남을 의미합니다.
          </p>
        </div>

        <div className="grid md:grid-cols-2 gap-6 mb-8">
          <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
            <h4 className="font-semibold mb-3">고전적 확률</h4>
            <p className="text-gray-600 dark:text-gray-400 mb-4">
              모든 경우가 동일하게 일어날 가능성이 있을 때:
            </p>
            <div className="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg font-mono text-sm">
              P(A) = 사건 A가 일어나는 경우의 수 / 전체 경우의 수
            </div>
          </div>
          
          <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
            <h4 className="font-semibold mb-3">빈도적 확률</h4>
            <p className="text-gray-600 dark:text-gray-400 mb-4">
              실험을 많이 반복했을 때의 상대 빈도:
            </p>
            <div className="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg font-mono text-sm">
              P(A) = lim(n→∞) [n(A) / n]
            </div>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">주사위와 동전 실험</h3>
        
        <div className="grid md:grid-cols-2 gap-6">
          <div className="bg-purple-50 dark:bg-purple-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-4 flex items-center gap-2">
              <Dice1 className="w-5 h-5" />
              주사위 굴리기
            </h4>
            <button
              onClick={rollDice}
              className="w-full py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors mb-4"
            >
              주사위 굴리기
            </button>
            {diceResult && (
              <div className="text-center">
                <div className="text-4xl font-bold text-purple-600 dark:text-purple-400 mb-2">
                  {diceResult}
                </div>
                <p className="text-sm text-gray-600 dark:text-gray-400">
                  각 면이 나올 확률: 1/6 ≈ 16.67%
                </p>
              </div>
            )}
          </div>

          <div className="bg-pink-50 dark:bg-pink-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-4">동전 던지기</h4>
            <button
              onClick={() => flipCoins(10)}
              className="w-full py-2 px-4 bg-pink-600 hover:bg-pink-700 text-white rounded-lg transition-colors mb-4"
            >
              10개 동전 던지기
            </button>
            {coinFlips.length > 0 && (
              <div>
                <div className="flex flex-wrap gap-2 mb-3">
                  {coinFlips.map((flip, i) => (
                    <span
                      key={i}
                      className={`w-10 h-10 rounded-full flex items-center justify-center font-bold ${
                        flip === 'H' 
                          ? 'bg-blue-500 text-white' 
                          : 'bg-gray-500 text-white'
                      }`}
                    >
                      {flip}
                    </span>
                  ))}
                </div>
                <p className="text-sm text-gray-600 dark:text-gray-400">
                  앞면(H): {coinFlips.filter(f => f === 'H').length}개, 
                  뒷면(T): {coinFlips.filter(f => f === 'T').length}개
                </p>
              </div>
            )}
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">조건부 확률</h3>
        
        <div className="bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl mb-6">
          <h4 className="font-semibold mb-3">정의</h4>
          <p className="mb-4">
            사건 B가 일어났을 때, 사건 A가 일어날 확률:
          </p>
          <div className="bg-white dark:bg-gray-800 p-4 rounded-lg font-mono">
            P(A|B) = P(A ∩ B) / P(B), P(B) > 0
          </div>
        </div>

        <div className="bg-yellow-50 dark:bg-yellow-900/20 p-6 rounded-xl">
          <h4 className="font-semibold mb-3 flex items-center gap-2">
            <AlertCircle className="w-5 h-5 text-yellow-600 dark:text-yellow-400" />
            예제: 의료 진단
          </h4>
          <p className="text-gray-700 dark:text-gray-300 mb-4">
            어떤 질병의 유병률이 1%이고, 검사의 정확도가 99%일 때:
          </p>
          <ul className="space-y-2 text-sm">
            <li>• P(질병) = 0.01</li>
            <li>• P(양성|질병) = 0.99 (민감도)</li>
            <li>• P(음성|건강) = 0.99 (특이도)</li>
          </ul>
          <p className="mt-4 text-gray-600 dark:text-gray-400">
            양성 판정을 받았을 때 실제로 질병이 있을 확률은?
          </p>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">베이즈 정리</h3>
        
        <div className="bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-6 rounded-xl">
          <h4 className="font-semibold mb-4">베이즈 정리 공식</h4>
          <div className="bg-white dark:bg-gray-800 p-4 rounded-lg font-mono text-center text-lg mb-4">
            P(A|B) = P(B|A) × P(A) / P(B)
          </div>
          <p className="text-gray-700 dark:text-gray-300">
            베이즈 정리는 사전 확률(Prior)과 우도(Likelihood)를 이용해 
            사후 확률(Posterior)을 계산하는 방법입니다.
          </p>
        </div>
      </section>

      <section className="bg-gray-50 dark:bg-gray-800/50 p-6 rounded-xl">
        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
          <Code className="w-5 h-5" />
          Python 코드 예제
        </h3>
        <pre className="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto">
{`import numpy as np

# 베이즈 정리를 이용한 의료 진단 예제
def bayes_theorem(prior, likelihood, evidence):
    """베이즈 정리를 이용한 사후 확률 계산"""
    posterior = (likelihood * prior) / evidence
    return posterior

# 질병 진단 예제
disease_rate = 0.01  # 유병률 1%
test_sensitivity = 0.99  # 민감도 99%
test_specificity = 0.99  # 특이도 99%

# P(양성) 계산
p_positive = (test_sensitivity * disease_rate + 
              (1 - test_specificity) * (1 - disease_rate))

# 양성일 때 실제 질병이 있을 확률
p_disease_given_positive = bayes_theorem(
    prior=disease_rate,
    likelihood=test_sensitivity,
    evidence=p_positive
)

print(f"양성 판정시 실제 질병 확률: {p_disease_given_positive:.2%}")
# 결과: 약 50%`}</pre>
      </section>
    </div>
  )
}

// Chapter 2: 확률 분포
function DistributionsContent() {
  const [selectedDist, setSelectedDist] = useState('normal')
  
  return (
    <div className="space-y-8">
      <section>
        <h2 className="text-3xl font-bold mb-6">확률 분포의 이해</h2>
        
        <div className="bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl mb-6">
          <h3 className="text-xl font-semibold mb-4">확률 분포란?</h3>
          <p className="text-gray-700 dark:text-gray-300">
            확률 분포는 확률 변수가 특정한 값을 가질 확률을 나타내는 함수입니다.
            이산 확률 분포와 연속 확률 분포로 구분됩니다.
          </p>
        </div>

        <div className="grid md:grid-cols-2 gap-6">
          <div className="bg-purple-50 dark:bg-purple-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-3">이산 확률 분포</h4>
            <ul className="space-y-2 text-gray-700 dark:text-gray-300">
              <li>• 이항 분포 (Binomial)</li>
              <li>• 포아송 분포 (Poisson)</li>
              <li>• 기하 분포 (Geometric)</li>
              <li>• 음이항 분포 (Negative Binomial)</li>
            </ul>
          </div>
          
          <div className="bg-pink-50 dark:bg-pink-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-3">연속 확률 분포</h4>
            <ul className="space-y-2 text-gray-700 dark:text-gray-300">
              <li>• 정규 분포 (Normal)</li>
              <li>• 지수 분포 (Exponential)</li>
              <li>• 감마 분포 (Gamma)</li>
              <li>• 베타 분포 (Beta)</li>
            </ul>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">주요 확률 분포</h3>
        
        {/* 정규 분포 */}
        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 mb-6">
          <h4 className="text-xl font-semibold mb-4 flex items-center gap-2">
            <BarChart3 className="w-5 h-5 text-blue-600" />
            정규 분포 (Normal Distribution)
          </h4>
          <div className="grid md:grid-cols-2 gap-6">
            <div>
              <p className="text-gray-700 dark:text-gray-300 mb-4">
                가장 중요한 연속 확률 분포로, 자연과 사회 현상에서 광범위하게 나타납니다.
              </p>
              <div className="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg font-mono text-sm mb-4">
                f(x) = (1/σ√(2π)) × e^(-½((x-μ)/σ)²)
              </div>
              <ul className="space-y-2 text-sm text-gray-600 dark:text-gray-400">
                <li>• μ: 평균 (중심 위치)</li>
                <li>• σ: 표준편차 (퍼짐 정도)</li>
                <li>• 68-95-99.7 규칙</li>
              </ul>
            </div>
            <div className="bg-gradient-to-br from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30 p-4 rounded-xl">
              <div className="text-center text-gray-600 dark:text-gray-400">
                <p className="mb-2">정규분포 시각화</p>
                <div className="text-6xl">📊</div>
                <p className="text-sm mt-2">N(0, 1) 표준정규분포</p>
              </div>
            </div>
          </div>
        </div>

        {/* 이항 분포 */}
        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 mb-6">
          <h4 className="text-xl font-semibold mb-4">이항 분포 (Binomial Distribution)</h4>
          <p className="text-gray-700 dark:text-gray-300 mb-4">
            n번의 독립적인 베르누이 시행에서 성공 횟수의 분포
          </p>
          <div className="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg font-mono text-sm mb-4">
            P(X = k) = C(n,k) × p^k × (1-p)^(n-k)
          </div>
          <div className="grid md:grid-cols-3 gap-4 text-sm">
            <div className="bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg">
              <strong>예시 1:</strong> 동전 던지기
              <p className="text-gray-600 dark:text-gray-400">n=10, p=0.5</p>
            </div>
            <div className="bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg">
              <strong>예시 2:</strong> 품질 검사
              <p className="text-gray-600 dark:text-gray-400">n=100, p=0.95</p>
            </div>
            <div className="bg-pink-50 dark:bg-pink-900/20 p-3 rounded-lg">
              <strong>예시 3:</strong> 시험 합격
              <p className="text-gray-600 dark:text-gray-400">n=20, p=0.7</p>
            </div>
          </div>
        </div>

        {/* 포아송 분포 */}
        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
          <h4 className="text-xl font-semibold mb-4">포아송 분포 (Poisson Distribution)</h4>
          <p className="text-gray-700 dark:text-gray-300 mb-4">
            단위 시간/공간에서 발생하는 사건의 횟수 분포
          </p>
          <div className="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg font-mono text-sm mb-4">
            P(X = k) = (λ^k × e^(-λ)) / k!
          </div>
          <ul className="space-y-2 text-gray-600 dark:text-gray-400">
            <li>• 콜센터 전화 수</li>
            <li>• 웹사이트 방문자 수</li>
            <li>• 교통사고 발생 건수</li>
            <li>• 제품 불량 개수</li>
          </ul>
        </div>
      </section>

      <section className="bg-gray-50 dark:bg-gray-800/50 p-6 rounded-xl">
        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
          <Code className="w-5 h-5" />
          Python으로 분포 시뮬레이션
        </h3>
        <pre className="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto">
{`import numpy as np
import matplotlib.pyplot as plt
from scipy import stats

# 정규 분포 시뮬레이션
mu, sigma = 100, 15
normal_samples = np.random.normal(mu, sigma, 10000)

# 이항 분포 시뮬레이션
n, p = 20, 0.3
binomial_samples = np.random.binomial(n, p, 10000)

# 포아송 분포 시뮬레이션
lambda_param = 4
poisson_samples = np.random.poisson(lambda_param, 10000)

# 시각화
fig, axes = plt.subplots(1, 3, figsize=(15, 5))

axes[0].hist(normal_samples, bins=50, density=True, alpha=0.7)
axes[0].set_title('정규 분포')

axes[1].hist(binomial_samples, bins=20, density=True, alpha=0.7)
axes[1].set_title('이항 분포')

axes[2].hist(poisson_samples, bins=20, density=True, alpha=0.7)
axes[2].set_title('포아송 분포')

plt.tight_layout()
plt.show()`}</pre>
      </section>
    </div>
  )
}

// Chapter 3: 기술 통계
function DescriptiveStatisticsContent() {
  return (
    <div className="space-y-8">
      <section>
        <h2 className="text-3xl font-bold mb-6">기술 통계의 핵심</h2>
        
        <div className="bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl mb-6">
          <p className="text-lg text-gray-700 dark:text-gray-300">
            기술 통계는 데이터의 특성을 요약하고 설명하는 통계 기법입니다.
            중심 경향성, 산포도, 분포의 형태를 파악할 수 있습니다.
          </p>
        </div>

        <div className="grid md:grid-cols-3 gap-6">
          <div className="bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-3 flex items-center gap-2">
              <Calculator className="w-5 h-5" />
              중심 경향성
            </h4>
            <ul className="space-y-2 text-gray-700 dark:text-gray-300">
              <li>• 평균 (Mean)</li>
              <li>• 중앙값 (Median)</li>
              <li>• 최빈값 (Mode)</li>
            </ul>
          </div>
          
          <div className="bg-purple-50 dark:bg-purple-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-3 flex items-center gap-2">
              <TrendingUp className="w-5 h-5" />
              산포도
            </h4>
            <ul className="space-y-2 text-gray-700 dark:text-gray-300">
              <li>• 범위 (Range)</li>
              <li>• 분산 (Variance)</li>
              <li>• 표준편차 (SD)</li>
            </ul>
          </div>
          
          <div className="bg-pink-50 dark:bg-pink-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-3 flex items-center gap-2">
              <BarChart3 className="w-5 h-5" />
              분포 형태
            </h4>
            <ul className="space-y-2 text-gray-700 dark:text-gray-300">
              <li>• 왜도 (Skewness)</li>
              <li>• 첨도 (Kurtosis)</li>
              <li>• 사분위수 (Quartiles)</li>
            </ul>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">평균, 중앙값, 최빈값</h3>
        
        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
          <div className="grid md:grid-cols-3 gap-6">
            <div>
              <h4 className="font-semibold mb-2">평균 (Mean)</h4>
              <div className="bg-gray-100 dark:bg-gray-900 p-3 rounded-lg font-mono text-sm mb-3">
                x̄ = Σx / n
              </div>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                모든 값의 합을 개수로 나눈 값
              </p>
            </div>
            
            <div>
              <h4 className="font-semibold mb-2">중앙값 (Median)</h4>
              <p className="text-sm text-gray-600 dark:text-gray-400 mb-3">
                정렬된 데이터의 중앙에 위치한 값
              </p>
              <p className="text-xs text-purple-600 dark:text-purple-400">
                이상치에 강건함
              </p>
            </div>
            
            <div>
              <h4 className="font-semibold mb-2">최빈값 (Mode)</h4>
              <p className="text-sm text-gray-600 dark:text-gray-400 mb-3">
                가장 빈번하게 나타나는 값
              </p>
              <p className="text-xs text-pink-600 dark:text-pink-400">
                범주형 데이터에 유용
              </p>
            </div>
          </div>

          <div className="mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg">
            <h5 className="font-semibold mb-2">예제: 시험 점수</h5>
            <p className="text-sm text-gray-700 dark:text-gray-300">
              점수: [65, 70, 70, 75, 80, 85, 90, 95, 100]
            </p>
            <ul className="mt-2 space-y-1 text-sm">
              <li>• 평균: 81.1점</li>
              <li>• 중앙값: 80점</li>
              <li>• 최빈값: 70점</li>
            </ul>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">분산과 표준편차</h3>
        
        <div className="bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-6 rounded-xl">
          <h4 className="font-semibold mb-4">분산 (Variance)</h4>
          <div className="bg-white dark:bg-gray-800 p-4 rounded-lg mb-4">
            <div className="font-mono text-center">
              σ² = Σ(x - μ)² / N (모분산)
            </div>
            <div className="font-mono text-center mt-2">
              s² = Σ(x - x̄)² / (n-1) (표본분산)
            </div>
          </div>
          
          <h4 className="font-semibold mb-4">표준편차 (Standard Deviation)</h4>
          <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
            <div className="font-mono text-center">
              σ = √(σ²) 또는 s = √(s²)
            </div>
          </div>
          
          <p className="mt-4 text-gray-700 dark:text-gray-300">
            표준편차는 데이터가 평균으로부터 얼마나 퍼져있는지를 나타내며,
            원래 데이터와 같은 단위를 사용합니다.
          </p>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">상관계수</h3>
        
        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
          <h4 className="font-semibold mb-4">피어슨 상관계수</h4>
          <div className="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg font-mono text-center mb-4">
            r = Cov(X,Y) / (σ_X × σ_Y)
          </div>
          
          <div className="grid md:grid-cols-3 gap-4 text-center">
            <div className="p-4 bg-red-50 dark:bg-red-900/20 rounded-lg">
              <div className="text-2xl font-bold text-red-600 dark:text-red-400">r = -1</div>
              <p className="text-sm mt-2">완전한 음의 상관</p>
            </div>
            <div className="p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
              <div className="text-2xl font-bold text-gray-600 dark:text-gray-400">r = 0</div>
              <p className="text-sm mt-2">상관관계 없음</p>
            </div>
            <div className="p-4 bg-green-50 dark:bg-green-900/20 rounded-lg">
              <div className="text-2xl font-bold text-green-600 dark:text-green-400">r = +1</div>
              <p className="text-sm mt-2">완전한 양의 상관</p>
            </div>
          </div>
        </div>
      </section>

      <section className="bg-gray-50 dark:bg-gray-800/50 p-6 rounded-xl">
        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
          <Code className="w-5 h-5" />
          Python 기술통계 실습
        </h3>
        <pre className="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto">
{`import pandas as pd
import numpy as np

# 데이터 생성
data = pd.DataFrame({
    'score': [65, 70, 70, 75, 80, 85, 90, 95, 100],
    'study_hours': [2, 3, 3, 4, 5, 6, 7, 8, 9]
})

# 기술 통계량
print("기술 통계 요약:")
print(data.describe())

# 중심 경향성
print(f"\\n평균: {data['score'].mean():.2f}")
print(f"중앙값: {data['score'].median()}")
print(f"최빈값: {data['score'].mode()[0]}")

# 산포도
print(f"\\n분산: {data['score'].var():.2f}")
print(f"표준편차: {data['score'].std():.2f}")

# 상관계수
correlation = data['score'].corr(data['study_hours'])
print(f"\\n상관계수: {correlation:.3f}")`}</pre>
      </section>
    </div>
  )
}

// Chapter 4: 추론 통계
function InferentialStatisticsContent() {
  return (
    <div className="space-y-8">
      <section>
        <h2 className="text-3xl font-bold mb-6">추론 통계학</h2>
        
        <div className="bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl mb-6">
          <p className="text-lg text-gray-700 dark:text-gray-300">
            추론 통계는 표본 데이터를 바탕으로 모집단의 특성을 추정하고,
            가설을 검정하는 통계적 방법입니다.
          </p>
        </div>

        <div className="grid md:grid-cols-2 gap-6">
          <div className="bg-purple-50 dark:bg-purple-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-3 flex items-center gap-2">
              <FlaskConical className="w-5 h-5" />
              가설 검정
            </h4>
            <p className="text-gray-700 dark:text-gray-300">
              귀무가설과 대립가설을 설정하고,
              데이터를 통해 귀무가설의 기각 여부를 결정
            </p>
          </div>
          
          <div className="bg-pink-50 dark:bg-pink-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-3 flex items-center gap-2">
              <Calculator className="w-5 h-5" />
              신뢰구간
            </h4>
            <p className="text-gray-700 dark:text-gray-300">
              모수가 특정 구간에 포함될 확률을 나타내는
              구간 추정 방법
            </p>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">가설 검정의 단계</h3>
        
        <div className="space-y-4">
          {[
            { step: 1, title: "가설 설정", desc: "귀무가설(H₀)과 대립가설(H₁) 설정" },
            { step: 2, title: "유의수준 결정", desc: "보통 α = 0.05 또는 0.01 사용" },
            { step: 3, title: "검정통계량 계산", desc: "표본 데이터로부터 검정통계량 산출" },
            { step: 4, title: "p-value 계산", desc: "검정통계량의 극단성을 확률로 표현" },
            { step: 5, title: "결론", desc: "p-value < α면 귀무가설 기각" }
          ].map((item) => (
            <div key={item.step} className="flex items-start gap-4 bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700">
              <div className="w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold flex-shrink-0">
                {item.step}
              </div>
              <div>
                <h4 className="font-semibold">{item.title}</h4>
                <p className="text-gray-600 dark:text-gray-400">{item.desc}</p>
              </div>
            </div>
          ))}
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">주요 통계 검정</h3>
        
        <div className="grid gap-6">
          {/* t-test */}
          <div className="bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-6 rounded-xl">
            <h4 className="text-xl font-semibold mb-4">t-검정 (t-test)</h4>
            <div className="grid md:grid-cols-3 gap-4">
              <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
                <h5 className="font-semibold mb-2">단일표본 t-검정</h5>
                <p className="text-sm text-gray-600 dark:text-gray-400">
                  표본평균과 모평균 비교
                </p>
                <div className="mt-2 font-mono text-xs">
                  t = (x̄ - μ) / (s/√n)
                </div>
              </div>
              <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
                <h5 className="font-semibold mb-2">독립표본 t-검정</h5>
                <p className="text-sm text-gray-600 dark:text-gray-400">
                  두 독립집단의 평균 비교
                </p>
                <div className="mt-2 font-mono text-xs">
                  t = (x̄₁ - x̄₂) / SE
                </div>
              </div>
              <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
                <h5 className="font-semibold mb-2">대응표본 t-검정</h5>
                <p className="text-sm text-gray-600 dark:text-gray-400">
                  동일 대상의 전후 비교
                </p>
                <div className="mt-2 font-mono text-xs">
                  t = d̄ / (s_d/√n)
                </div>
              </div>
            </div>
          </div>

          {/* ANOVA */}
          <div className="bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl">
            <h4 className="text-xl font-semibold mb-4">분산분석 (ANOVA)</h4>
            <p className="text-gray-700 dark:text-gray-300 mb-4">
              세 개 이상 집단의 평균 차이를 검정
            </p>
            <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
              <div className="font-mono text-center mb-3">
                F = MSB / MSW
              </div>
              <ul className="space-y-2 text-sm text-gray-600 dark:text-gray-400">
                <li>• MSB: 집단 간 평균제곱</li>
                <li>• MSW: 집단 내 평균제곱</li>
                <li>• 사후검정: Tukey, Bonferroni</li>
              </ul>
            </div>
          </div>

          {/* Chi-square */}
          <div className="bg-gradient-to-r from-pink-50 to-orange-50 dark:from-pink-900/20 dark:to-orange-900/20 p-6 rounded-xl">
            <h4 className="text-xl font-semibold mb-4">카이제곱 검정 (Chi-square test)</h4>
            <p className="text-gray-700 dark:text-gray-300 mb-4">
              범주형 변수 간의 독립성 검정
            </p>
            <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
              <div className="font-mono text-center mb-3">
                χ² = Σ[(O - E)² / E]
              </div>
              <ul className="space-y-2 text-sm text-gray-600 dark:text-gray-400">
                <li>• O: 관측빈도</li>
                <li>• E: 기대빈도</li>
                <li>• 적합도 검정, 독립성 검정</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <section className="bg-yellow-50 dark:bg-yellow-900/20 p-6 rounded-xl">
        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
          <AlertCircle className="w-5 h-5 text-yellow-600" />
          p-value의 올바른 해석
        </h3>
        <div className="space-y-3 text-gray-700 dark:text-gray-300">
          <p>
            <strong>p-value</strong>는 귀무가설이 참일 때, 관측된 결과보다 
            극단적인 결과가 나올 확률입니다.
          </p>
          <ul className="space-y-2 ml-4">
            <li>• p < 0.05: 통계적으로 유의함</li>
            <li>• p ≥ 0.05: 통계적으로 유의하지 않음</li>
            <li>• p-value는 효과 크기를 나타내지 않음</li>
            <li>• 다중 검정 시 보정 필요 (Bonferroni)</li>
          </ul>
        </div>
      </section>

      <section className="bg-gray-50 dark:bg-gray-800/50 p-6 rounded-xl">
        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
          <Code className="w-5 h-5" />
          Python으로 가설검정 실습
        </h3>
        <pre className="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto">
{`from scipy import stats
import numpy as np

# 1. 단일표본 t-검정
# 학생들의 평균 키가 170cm인지 검정
heights = [168, 172, 175, 169, 171, 173, 170, 174, 167, 172]
t_stat, p_value = stats.ttest_1samp(heights, 170)
print(f"t-통계량: {t_stat:.3f}, p-value: {p_value:.3f}")

# 2. 독립표본 t-검정
# 두 그룹의 성적 차이 검정
group_A = [85, 88, 82, 87, 84, 89, 86, 83, 90, 85]
group_B = [78, 82, 79, 81, 77, 80, 83, 76, 84, 79]
t_stat, p_value = stats.ttest_ind(group_A, group_B)
print(f"\\nt-통계량: {t_stat:.3f}, p-value: {p_value:.3f}")

# 3. ANOVA
# 세 가지 교육 방법의 효과 비교
method_1 = [85, 88, 82, 87, 84]
method_2 = [90, 92, 88, 91, 89]
method_3 = [78, 82, 79, 81, 77]
f_stat, p_value = stats.f_oneway(method_1, method_2, method_3)
print(f"\\nF-통계량: {f_stat:.3f}, p-value: {p_value:.3f}")

# 4. 카이제곱 검정
# 성별과 선호도의 독립성 검정
observed = np.array([[30, 20], [25, 25]])
chi2, p_value, dof, expected = stats.chi2_contingency(observed)
print(f"\\nχ²-통계량: {chi2:.3f}, p-value: {p_value:.3f}")`}</pre>
      </section>
    </div>
  )
}

// Chapter 5: 베이지안 통계
function BayesianStatisticsContent() {
  return (
    <div className="space-y-8">
      <section>
        <h2 className="text-3xl font-bold mb-6">베이지안 통계학</h2>
        
        <div className="bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl mb-6">
          <p className="text-lg text-gray-700 dark:text-gray-300">
            베이지안 통계는 사전 지식을 확률로 표현하고, 새로운 데이터를 통해
            이를 업데이트하는 통계적 추론 방법입니다.
          </p>
        </div>

        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
          <h3 className="text-xl font-semibold mb-4">베이즈 정리 복습</h3>
          <div className="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg font-mono text-center text-lg mb-4">
            P(θ|D) = P(D|θ) × P(θ) / P(D)
          </div>
          <div className="grid md:grid-cols-2 gap-4">
            <div>
              <h4 className="font-semibold mb-2">용어 설명</h4>
              <ul className="space-y-2 text-sm text-gray-600 dark:text-gray-400">
                <li>• P(θ): 사전 분포 (Prior)</li>
                <li>• P(D|θ): 우도 (Likelihood)</li>
                <li>• P(θ|D): 사후 분포 (Posterior)</li>
                <li>• P(D): 정규화 상수</li>
              </ul>
            </div>
            <div>
              <h4 className="font-semibold mb-2">해석</h4>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                "데이터를 관찰한 후의 믿음(사후) = 
                데이터가 주는 정보(우도) × 사전 믿음(사전)"
              </p>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">빈도주의 vs 베이지안</h3>
        
        <div className="grid md:grid-cols-2 gap-6">
          <div className="bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-3 flex items-center gap-2">
              <BarChart3 className="w-5 h-5 text-blue-600" />
              빈도주의 통계
            </h4>
            <ul className="space-y-2 text-gray-700 dark:text-gray-300">
              <li>• 모수는 고정된 값</li>
              <li>• 데이터는 랜덤</li>
              <li>• 장기적 빈도로 확률 정의</li>
              <li>• p-value, 신뢰구간 사용</li>
            </ul>
          </div>
          
          <div className="bg-purple-50 dark:bg-purple-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-3 flex items-center gap-2">
              <Brain className="w-5 h-5 text-purple-600" />
              베이지안 통계
            </h4>
            <ul className="space-y-2 text-gray-700 dark:text-gray-300">
              <li>• 모수는 확률변수</li>
              <li>• 데이터는 고정</li>
              <li>• 주관적 믿음으로 확률 정의</li>
              <li>• 사후분포, 신용구간 사용</li>
            </ul>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">베이지안 추론 예제</h3>
        
        <div className="bg-gradient-to-br from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20 p-6 rounded-xl">
          <h4 className="font-semibold mb-4">동전 던지기 문제</h4>
          <p className="text-gray-700 dark:text-gray-300 mb-4">
            동전이 공정한지 알아보기 위해 10번 던져서 7번 앞면이 나왔습니다.
            이 동전이 공정할 확률은?
          </p>
          
          <div className="space-y-4">
            <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
              <h5 className="font-semibold mb-2">1. 사전 분포 설정</h5>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                θ ~ Beta(1, 1) = Uniform(0, 1)
              </p>
              <p className="text-xs mt-1">모든 확률값에 대해 동일한 믿음</p>
            </div>
            
            <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
              <h5 className="font-semibold mb-2">2. 우도 계산</h5>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                L(θ|data) = θ^7 × (1-θ)^3
              </p>
              <p className="text-xs mt-1">이항분포 우도</p>
            </div>
            
            <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
              <h5 className="font-semibold mb-2">3. 사후 분포</h5>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                θ|data ~ Beta(8, 4)
              </p>
              <p className="text-xs mt-1">사후 평균 = 8/12 = 0.67</p>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">MCMC (Markov Chain Monte Carlo)</h3>
        
        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
          <p className="text-gray-700 dark:text-gray-300 mb-4">
            복잡한 사후분포에서 샘플을 추출하는 알고리즘
          </p>
          
          <div className="grid md:grid-cols-2 gap-4">
            <div className="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
              <h5 className="font-semibold mb-2">Metropolis-Hastings</h5>
              <ul className="text-sm space-y-1 text-gray-600 dark:text-gray-400">
                <li>• 제안 분포에서 샘플링</li>
                <li>• 수락/거부 결정</li>
                <li>• 범용적 사용 가능</li>
              </ul>
            </div>
            
            <div className="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg">
              <h5 className="font-semibold mb-2">Gibbs Sampling</h5>
              <ul className="text-sm space-y-1 text-gray-600 dark:text-gray-400">
                <li>• 조건부 분포에서 샘플링</li>
                <li>• 항상 수락</li>
                <li>• 조건부 분포 필요</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <section className="bg-gray-50 dark:bg-gray-800/50 p-6 rounded-xl">
        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
          <Code className="w-5 h-5" />
          PyMC3로 베이지안 분석
        </h3>
        <pre className="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto">
{`import pymc3 as pm
import numpy as np

# 동전 던지기 데이터
data = np.array([1, 1, 0, 1, 1, 1, 0, 1, 0, 1])  # 1=앞면, 0=뒷면

with pm.Model() as coin_model:
    # 사전분포: Beta(1, 1) = Uniform(0, 1)
    theta = pm.Beta('theta', alpha=1, beta=1)
    
    # 우도: 베르누이 분포
    y = pm.Bernoulli('y', p=theta, observed=data)
    
    # MCMC 샘플링
    trace = pm.sample(2000, tune=1000, return_inferencedata=False)

# 결과 요약
print(pm.summary(trace))

# 사후분포 시각화
pm.plot_posterior(trace, var_names=['theta'])

# 95% 신용구간
credible_interval = pm.hdi(trace['theta'], 0.95)
print(f"95% 신용구간: [{credible_interval[0]:.3f}, {credible_interval[1]:.3f}]")`}</pre>
      </section>
    </div>
  )
}

// Chapter 6: 회귀 분석
function RegressionAnalysisContent() {
  return (
    <div className="space-y-8">
      <section>
        <h2 className="text-3xl font-bold mb-6">회귀 분석</h2>
        
        <div className="bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-6 rounded-xl mb-6">
          <p className="text-lg text-gray-700 dark:text-gray-300">
            회귀 분석은 변수들 간의 관계를 모델링하고 예측하는 통계 기법입니다.
            독립변수(X)로 종속변수(Y)를 설명하고 예측합니다.
          </p>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">단순 선형 회귀</h3>
        
        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
          <div className="mb-4">
            <h4 className="font-semibold mb-2">회귀 방정식</h4>
            <div className="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg font-mono text-center">
              Y = β₀ + β₁X + ε
            </div>
          </div>
          
          <div className="grid md:grid-cols-3 gap-4 text-sm">
            <div className="text-center">
              <div className="font-semibold">Y</div>
              <div className="text-gray-600 dark:text-gray-400">종속변수</div>
            </div>
            <div className="text-center">
              <div className="font-semibold">X</div>
              <div className="text-gray-600 dark:text-gray-400">독립변수</div>
            </div>
            <div className="text-center">
              <div className="font-semibold">ε</div>
              <div className="text-gray-600 dark:text-gray-400">오차항</div>
            </div>
          </div>
          
          <div className="mt-6 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg">
            <h5 className="font-semibold mb-2">최소제곱법 (OLS)</h5>
            <p className="text-sm text-gray-700 dark:text-gray-300">
              잔차 제곱합 Σ(y - ŷ)²을 최소화하는 β₀, β₁을 찾는 방법
            </p>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">다중 선형 회귀</h3>
        
        <div className="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl">
          <h4 className="font-semibold mb-3">다중 회귀 방정식</h4>
          <div className="bg-white dark:bg-gray-800 p-4 rounded-lg font-mono text-center mb-4">
            Y = β₀ + β₁X₁ + β₂X₂ + ... + βₚXₚ + ε
          </div>
          
          <div className="grid md:grid-cols-2 gap-4">
            <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
              <h5 className="font-semibold mb-2">가정사항</h5>
              <ul className="text-sm space-y-1 text-gray-600 dark:text-gray-400">
                <li>• 선형성</li>
                <li>• 독립성</li>
                <li>• 등분산성</li>
                <li>• 정규성</li>
                <li>• 다중공선성 없음</li>
              </ul>
            </div>
            
            <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
              <h5 className="font-semibold mb-2">평가 지표</h5>
              <ul className="text-sm space-y-1 text-gray-600 dark:text-gray-400">
                <li>• R² (결정계수)</li>
                <li>• Adjusted R²</li>
                <li>• RMSE</li>
                <li>• MAE</li>
                <li>• F-통계량</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">로지스틱 회귀</h3>
        
        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
          <p className="text-gray-700 dark:text-gray-300 mb-4">
            이진 분류 문제를 위한 회귀 모델
          </p>
          
          <div className="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg font-mono mb-4">
            <div className="text-center mb-2">log(p/(1-p)) = β₀ + β₁X₁ + ... + βₚXₚ</div>
            <div className="text-center">p = 1 / (1 + e^(-(β₀ + β₁X₁ + ... + βₚXₚ)))</div>
          </div>
          
          <div className="grid md:grid-cols-2 gap-4">
            <div className="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
              <h5 className="font-semibold mb-2">장점</h5>
              <ul className="text-sm space-y-1 text-gray-600 dark:text-gray-400">
                <li>• 확률값 출력 (0~1)</li>
                <li>• 해석 가능</li>
                <li>• 계산 효율적</li>
              </ul>
            </div>
            
            <div className="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg">
              <h5 className="font-semibold mb-2">활용</h5>
              <ul className="text-sm space-y-1 text-gray-600 dark:text-gray-400">
                <li>• 의료 진단</li>
                <li>• 신용 평가</li>
                <li>• 마케팅 반응</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">정규화 기법</h3>
        
        <div className="grid md:grid-cols-3 gap-4">
          <div className="bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-3">Ridge (L2)</h4>
            <div className="bg-white dark:bg-gray-800 p-3 rounded-lg font-mono text-xs mb-3">
              Loss = RSS + λΣβᵢ²
            </div>
            <p className="text-sm text-gray-600 dark:text-gray-400">
              계수를 0에 가깝게 축소
            </p>
          </div>
          
          <div className="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-3">Lasso (L1)</h4>
            <div className="bg-white dark:bg-gray-800 p-3 rounded-lg font-mono text-xs mb-3">
              Loss = RSS + λΣ|βᵢ|
            </div>
            <p className="text-sm text-gray-600 dark:text-gray-400">
              일부 계수를 0으로 만들어 변수 선택
            </p>
          </div>
          
          <div className="bg-gradient-to-br from-pink-50 to-orange-50 dark:from-pink-900/20 dark:to-orange-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-3">Elastic Net</h4>
            <div className="bg-white dark:bg-gray-800 p-3 rounded-lg font-mono text-xs mb-3">
              Loss = RSS + λ₁Σ|βᵢ| + λ₂Σβᵢ²
            </div>
            <p className="text-sm text-gray-600 dark:text-gray-400">
              Ridge와 Lasso의 장점 결합
            </p>
          </div>
        </div>
      </section>

      <section className="bg-gray-50 dark:bg-gray-800/50 p-6 rounded-xl">
        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
          <Code className="w-5 h-5" />
          Python으로 회귀분석 실습
        </h3>
        <pre className="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto">
{`import numpy as np
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.linear_model import LinearRegression, LogisticRegression, Ridge, Lasso
from sklearn.metrics import r2_score, mean_squared_error

# 데이터 생성
np.random.seed(42)
X = np.random.randn(100, 3)
y = 2*X[:, 0] + 3*X[:, 1] - X[:, 2] + np.random.randn(100)*0.5

# 데이터 분할
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)

# 1. 선형 회귀
lr = LinearRegression()
lr.fit(X_train, y_train)
y_pred = lr.predict(X_test)

print("선형 회귀 결과:")
print(f"계수: {lr.coef_}")
print(f"R²: {r2_score(y_test, y_pred):.3f}")
print(f"RMSE: {np.sqrt(mean_squared_error(y_test, y_pred)):.3f}")

# 2. Ridge 회귀
ridge = Ridge(alpha=1.0)
ridge.fit(X_train, y_train)
y_pred_ridge = ridge.predict(X_test)
print(f"\\nRidge R²: {r2_score(y_test, y_pred_ridge):.3f}")

# 3. Lasso 회귀
lasso = Lasso(alpha=0.1)
lasso.fit(X_train, y_train)
y_pred_lasso = lasso.predict(X_test)
print(f"Lasso R²: {r2_score(y_test, y_pred_lasso):.3f}")
print(f"Lasso 계수: {lasso.coef_}")

# 4. 로지스틱 회귀 (이진 분류)
y_binary = (y > np.median(y)).astype(int)
X_train, X_test, y_train_b, y_test_b = train_test_split(X, y_binary, test_size=0.2)

logit = LogisticRegression()
logit.fit(X_train, y_train_b)
accuracy = logit.score(X_test, y_test_b)
print(f"\\n로지스틱 회귀 정확도: {accuracy:.3f}")`}</pre>
      </section>
    </div>
  )
}

// Chapter 7: 시계열 분석
function TimeSeriesContent() {
  return (
    <div className="space-y-8">
      <section>
        <h2 className="text-3xl font-bold mb-6">시계열 분석</h2>
        
        <div className="bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl mb-6">
          <p className="text-lg text-gray-700 dark:text-gray-300">
            시계열 분석은 시간에 따라 수집된 데이터의 패턴을 분석하고 
            미래를 예측하는 통계 기법입니다.
          </p>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">시계열의 구성 요소</h3>
        
        <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div className="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl text-center">
            <div className="text-3xl mb-2">📈</div>
            <h4 className="font-semibold">추세 (Trend)</h4>
            <p className="text-sm text-gray-600 dark:text-gray-400 mt-2">
              장기적인 방향성
            </p>
          </div>
          
          <div className="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-xl text-center">
            <div className="text-3xl mb-2">🔄</div>
            <h4 className="font-semibold">계절성 (Seasonal)</h4>
            <p className="text-sm text-gray-600 dark:text-gray-400 mt-2">
              주기적 패턴
            </p>
          </div>
          
          <div className="bg-pink-50 dark:bg-pink-900/20 p-4 rounded-xl text-center">
            <div className="text-3xl mb-2">〰️</div>
            <h4 className="font-semibold">순환 (Cyclic)</h4>
            <p className="text-sm text-gray-600 dark:text-gray-400 mt-2">
              비주기적 변동
            </p>
          </div>
          
          <div className="bg-orange-50 dark:bg-orange-900/20 p-4 rounded-xl text-center">
            <div className="text-3xl mb-2">🎲</div>
            <h4 className="font-semibold">불규칙 (Random)</h4>
            <p className="text-sm text-gray-600 dark:text-gray-400 mt-2">
              예측 불가능한 변동
            </p>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">ARIMA 모델</h3>
        
        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
          <h4 className="text-xl font-semibold mb-4">ARIMA(p, d, q)</h4>
          
          <div className="grid md:grid-cols-3 gap-4 mb-6">
            <div className="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
              <h5 className="font-semibold">AR(p)</h5>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                자기회귀 (Autoregressive)
              </p>
              <p className="text-xs mt-2">과거 값들의 선형 결합</p>
            </div>
            
            <div className="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg">
              <h5 className="font-semibold">I(d)</h5>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                차분 (Integrated)
              </p>
              <p className="text-xs mt-2">정상성을 위한 차분 횟수</p>
            </div>
            
            <div className="bg-pink-50 dark:bg-pink-900/20 p-4 rounded-lg">
              <h5 className="font-semibold">MA(q)</h5>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                이동평균 (Moving Average)
              </p>
              <p className="text-xs mt-2">과거 오차항의 선형 결합</p>
            </div>
          </div>
          
          <div className="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg">
            <p className="font-mono text-sm text-center">
              ARIMA(p,d,q): yₜ = c + φ₁yₜ₋₁ + ... + φₚyₜ₋ₚ + θ₁εₜ₋₁ + ... + θᵩεₜ₋ᵩ + εₜ
            </p>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">정상성 검정</h3>
        
        <div className="bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-6 rounded-xl">
          <h4 className="font-semibold mb-4">정상성이란?</h4>
          <p className="text-gray-700 dark:text-gray-300 mb-4">
            시계열의 통계적 특성(평균, 분산)이 시간에 따라 일정한 성질
          </p>
          
          <div className="grid md:grid-cols-2 gap-4">
            <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
              <h5 className="font-semibold mb-2">ADF 검정</h5>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                Augmented Dickey-Fuller Test
              </p>
              <ul className="text-xs mt-2 space-y-1">
                <li>• H₀: 단위근 존재 (비정상)</li>
                <li>• H₁: 단위근 없음 (정상)</li>
              </ul>
            </div>
            
            <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
              <h5 className="font-semibold mb-2">KPSS 검정</h5>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                Kwiatkowski-Phillips-Schmidt-Shin Test
              </p>
              <ul className="text-xs mt-2 space-y-1">
                <li>• H₀: 정상 시계열</li>
                <li>• H₁: 비정상 시계열</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">예측 기법들</h3>
        
        <div className="space-y-4">
          <div className="bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700">
            <h4 className="font-semibold mb-2">단순 이동평균</h4>
            <p className="text-sm text-gray-600 dark:text-gray-400">
              최근 n개 관측값의 평균
            </p>
          </div>
          
          <div className="bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700">
            <h4 className="font-semibold mb-2">지수평활법</h4>
            <p className="text-sm text-gray-600 dark:text-gray-400">
              최근 데이터에 더 큰 가중치
            </p>
          </div>
          
          <div className="bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700">
            <h4 className="font-semibold mb-2">SARIMA</h4>
            <p className="text-sm text-gray-600 dark:text-gray-400">
              계절성을 고려한 ARIMA
            </p>
          </div>
          
          <div className="bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700">
            <h4 className="font-semibold mb-2">Prophet</h4>
            <p className="text-sm text-gray-600 dark:text-gray-400">
              Facebook의 시계열 예측 라이브러리
            </p>
          </div>
        </div>
      </section>

      <section className="bg-gray-50 dark:bg-gray-800/50 p-6 rounded-xl">
        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
          <Code className="w-5 h-5" />
          Python으로 시계열 분석
        </h3>
        <pre className="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto">
{`import pandas as pd
import numpy as np
from statsmodels.tsa.arima.model import ARIMA
from statsmodels.tsa.stattools import adfuller
import matplotlib.pyplot as plt

# 시계열 데이터 생성
dates = pd.date_range('2020-01-01', periods=365, freq='D')
trend = np.linspace(100, 200, 365)
seasonal = 10 * np.sin(2 * np.pi * np.arange(365) / 30)
noise = np.random.randn(365) * 5
ts = pd.Series(trend + seasonal + noise, index=dates)

# 정상성 검정
result = adfuller(ts)
print(f'ADF 통계량: {result[0]:.4f}')
print(f'p-value: {result[1]:.4f}')
print(f'정상성: {"정상" if result[1] < 0.05 else "비정상"}')

# 차분을 통한 정상화
ts_diff = ts.diff().dropna()

# ARIMA 모델 적합
model = ARIMA(ts, order=(2, 1, 2))
model_fit = model.fit()

# 예측
forecast = model_fit.forecast(steps=30)

# 시각화
plt.figure(figsize=(12, 6))
plt.plot(ts, label='원본 데이터')
plt.plot(forecast, label='예측', color='red')
plt.legend()
plt.title('시계열 예측')
plt.show()

# 모델 요약
print(model_fit.summary())`}</pre>
      </section>
    </div>
  )
}

// Chapter 8: ML을 위한 통계
function MLStatisticsContent() {
  return (
    <div className="space-y-8">
      <section>
        <h2 className="text-3xl font-bold mb-6">머신러닝을 위한 통계</h2>
        
        <div className="bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl mb-6">
          <p className="text-lg text-gray-700 dark:text-gray-300">
            머신러닝의 성능을 향상시키고 결과를 해석하기 위한 
            필수적인 통계 개념과 기법들을 학습합니다.
          </p>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">편향-분산 트레이드오프</h3>
        
        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
          <div className="mb-6">
            <div className="bg-gray-100 dark:bg-gray-900 p-4 rounded-lg font-mono text-center">
              총 오차 = 편향² + 분산 + 잡음
            </div>
          </div>
          
          <div className="grid md:grid-cols-2 gap-6">
            <div className="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
              <h4 className="font-semibold mb-2 flex items-center gap-2">
                <TrendingUp className="w-5 h-5 text-blue-600" />
                높은 편향 (Underfitting)
              </h4>
              <ul className="text-sm space-y-1 text-gray-600 dark:text-gray-400">
                <li>• 모델이 너무 단순함</li>
                <li>• 학습 데이터도 잘 못 맞춤</li>
                <li>• 중요한 패턴을 놓침</li>
              </ul>
            </div>
            
            <div className="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg">
              <h4 className="font-semibold mb-2 flex items-center gap-2">
                <Zap className="w-5 h-5 text-purple-600" />
                높은 분산 (Overfitting)
              </h4>
              <ul className="text-sm space-y-1 text-gray-600 dark:text-gray-400">
                <li>• 모델이 너무 복잡함</li>
                <li>• 학습 데이터에 과적합</li>
                <li>• 일반화 능력 부족</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">교차 검증 (Cross-Validation)</h3>
        
        <div className="space-y-4">
          <div className="bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-4">k-Fold Cross-Validation</h4>
            <div className="bg-white dark:bg-gray-800 p-4 rounded-lg">
              <div className="grid grid-cols-5 gap-2 mb-4">
                {[1, 2, 3, 4, 5].map((fold) => (
                  <div
                    key={fold}
                    className={`p-2 text-center rounded ${
                      fold === 1 
                        ? 'bg-red-500 text-white' 
                        : 'bg-blue-500 text-white'
                    }`}
                  >
                    Fold {fold}
                  </div>
                ))}
              </div>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                데이터를 k개로 나누어 k번 학습과 검증 반복
              </p>
            </div>
          </div>
          
          <div className="grid md:grid-cols-2 gap-4">
            <div className="bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700">
              <h5 className="font-semibold mb-2">Leave-One-Out CV</h5>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                k = n (샘플 수), 가장 정확하지만 계산 비용 높음
              </p>
            </div>
            
            <div className="bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700">
              <h5 className="font-semibold mb-2">Stratified k-Fold</h5>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                각 폴드의 클래스 비율을 원본과 동일하게 유지
              </p>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">성능 평가 지표</h3>
        
        <div className="grid md:grid-cols-2 gap-6">
          {/* 분류 지표 */}
          <div className="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-4">분류 지표</h4>
            <div className="space-y-3">
              <div className="bg-white dark:bg-gray-800 p-3 rounded-lg">
                <h5 className="font-semibold text-sm">정확도 (Accuracy)</h5>
                <p className="text-xs text-gray-600 dark:text-gray-400">
                  (TP + TN) / (TP + TN + FP + FN)
                </p>
              </div>
              <div className="bg-white dark:bg-gray-800 p-3 rounded-lg">
                <h5 className="font-semibold text-sm">정밀도 (Precision)</h5>
                <p className="text-xs text-gray-600 dark:text-gray-400">
                  TP / (TP + FP)
                </p>
              </div>
              <div className="bg-white dark:bg-gray-800 p-3 rounded-lg">
                <h5 className="font-semibold text-sm">재현율 (Recall)</h5>
                <p className="text-xs text-gray-600 dark:text-gray-400">
                  TP / (TP + FN)
                </p>
              </div>
              <div className="bg-white dark:bg-gray-800 p-3 rounded-lg">
                <h5 className="font-semibold text-sm">F1 Score</h5>
                <p className="text-xs text-gray-600 dark:text-gray-400">
                  2 × (Precision × Recall) / (Precision + Recall)
                </p>
              </div>
            </div>
          </div>
          
          {/* 회귀 지표 */}
          <div className="bg-gradient-to-br from-pink-50 to-orange-50 dark:from-pink-900/20 dark:to-orange-900/20 p-6 rounded-xl">
            <h4 className="font-semibold mb-4">회귀 지표</h4>
            <div className="space-y-3">
              <div className="bg-white dark:bg-gray-800 p-3 rounded-lg">
                <h5 className="font-semibold text-sm">MAE</h5>
                <p className="text-xs text-gray-600 dark:text-gray-400">
                  Mean Absolute Error: Σ|y - ŷ| / n
                </p>
              </div>
              <div className="bg-white dark:bg-gray-800 p-3 rounded-lg">
                <h5 className="font-semibold text-sm">MSE</h5>
                <p className="text-xs text-gray-600 dark:text-gray-400">
                  Mean Squared Error: Σ(y - ŷ)² / n
                </p>
              </div>
              <div className="bg-white dark:bg-gray-800 p-3 rounded-lg">
                <h5 className="font-semibold text-sm">RMSE</h5>
                <p className="text-xs text-gray-600 dark:text-gray-400">
                  Root MSE: √(MSE)
                </p>
              </div>
              <div className="bg-white dark:bg-gray-800 p-3 rounded-lg">
                <h5 className="font-semibold text-sm">R²</h5>
                <p className="text-xs text-gray-600 dark:text-gray-400">
                  결정계수: 1 - (SS_res / SS_tot)
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h3 className="text-2xl font-bold mb-6">A/B 테스트</h3>
        
        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
          <h4 className="font-semibold mb-4">A/B 테스트 프로세스</h4>
          
          <div className="space-y-4">
            {[
              { title: "목표 설정", desc: "측정할 핵심 지표 정의 (전환율, CTR 등)" },
              { title: "표본 크기 계산", desc: "통계적 검정력을 위한 최소 샘플 수" },
              { title: "무작위 배정", desc: "사용자를 A/B 그룹에 랜덤 할당" },
              { title: "실험 진행", desc: "충분한 기간 동안 데이터 수집" },
              { title: "결과 분석", desc: "통계적 유의성 검정" }
            ].map((step, index) => (
              <div key={index} className="flex items-start gap-3">
                <div className="w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold flex-shrink-0">
                  {index + 1}
                </div>
                <div>
                  <h5 className="font-semibold">{step.title}</h5>
                  <p className="text-sm text-gray-600 dark:text-gray-400">{step.desc}</p>
                </div>
              </div>
            ))}
          </div>
          
          <div className="mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg">
            <h5 className="font-semibold mb-2 flex items-center gap-2">
              <AlertCircle className="w-5 h-5 text-yellow-600" />
              주의사항
            </h5>
            <ul className="text-sm space-y-1 text-gray-600 dark:text-gray-400">
              <li>• 실험 중 변경 금지</li>
              <li>• 계절성 효과 고려</li>
              <li>• 다중 검정 보정</li>
              <li>• 실무적 유의성 vs 통계적 유의성</li>
            </ul>
          </div>
        </div>
      </section>

      <section className="bg-gray-50 dark:bg-gray-800/50 p-6 rounded-xl">
        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
          <Code className="w-5 h-5" />
          ML 평가 실습 코드
        </h3>
        <pre className="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto">
{`from sklearn.model_selection import cross_val_score, KFold
from sklearn.metrics import confusion_matrix, classification_report
from sklearn.ensemble import RandomForestClassifier
from sklearn.datasets import make_classification
import numpy as np

# 데이터 생성
X, y = make_classification(n_samples=1000, n_features=20, 
                         n_informative=15, n_redundant=5,
                         random_state=42)

# 모델 생성
rf = RandomForestClassifier(n_estimators=100, random_state=42)

# k-fold 교차 검증
kfold = KFold(n_splits=5, shuffle=True, random_state=42)
cv_scores = cross_val_score(rf, X, y, cv=kfold, scoring='accuracy')

print(f"교차 검증 점수: {cv_scores}")
print(f"평균 정확도: {cv_scores.mean():.3f} (+/- {cv_scores.std() * 2:.3f})")

# 학습 및 예측
from sklearn.model_selection import train_test_split
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)

rf.fit(X_train, y_train)
y_pred = rf.predict(X_test)

# 성능 평가
print("\\n분류 리포트:")
print(classification_report(y_test, y_pred))

# A/B 테스트 예제
def ab_test(control, treatment, alpha=0.05):
    """두 그룹의 전환율 차이 검정"""
    from scipy.stats import chi2_contingency
    
    # 2x2 분할표 생성
    successes = [control['conversions'], treatment['conversions']]
    failures = [control['total'] - control['conversions'], 
                treatment['total'] - treatment['conversions']]
    contingency_table = np.array([successes, failures])
    
    # 카이제곱 검정
    chi2, p_value, dof, expected = chi2_contingency(contingency_table.T)
    
    return {
        'p_value': p_value,
        'significant': p_value < alpha,
        'control_rate': control['conversions'] / control['total'],
        'treatment_rate': treatment['conversions'] / treatment['total']
    }

# A/B 테스트 실행
control = {'total': 1000, 'conversions': 120}
treatment = {'total': 1000, 'conversions': 150}
result = ab_test(control, treatment)
print(f"\\nA/B 테스트 결과: {result}")`}</pre>
      </section>
    </div>
  )
}